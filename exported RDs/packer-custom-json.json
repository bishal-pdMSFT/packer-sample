{"source":2,"id":5,"revision":6,"name":"packer-custom-json","createdBy":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"createdOn":"2017-03-14T15:21:58.543Z","modifiedBy":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"modifiedOn":"2017-03-15T10:34:02.100Z","lastRelease":null,"path":"\\","variables":{"client_id":{"value":"4cf33657-968f-4e99-be80-edd8300b4586"},"client_secret":{"value":"12345"},"subscription_id":{"value":"c00d16c7-6c1f-4c03-9be1-6934a4c49682"},"tenant_id":{"value":"72f988bf-86f1-41af-91ab-2d7cd011db47"},"object_id":{"value":"90ab0072-c75a-4fba-ac9b-51e7927065d7"},"resource_group":{"value":"bishal-packer-rg1"},"storage_account":{"value":"bishalpackerimages"},"image_publisher":{"value":"MicrosoftWindowsServer"},"image_offer":{"value":"WindowsServer"},"image_sku":{"value":"2012-R2-Datacenter"},"location":{"value":"southindia"},"script_path":{"value":"E:\\work\\packer\\deploy.ps1"},"script_name":{"value":"deploy.ps1"},"script_arguments":{"value":"-target \"subdir 1\" -shouldFail false"},"package_path":{"value":"E:\\work\\packer\\dummy.zip"},"package_name":{"value":"dummy.zip"},"capture_name_prefix":{"value":"$(release.releaseid)"},"imageUri":{"value":""},"storageAccntLoc":{"value":""}},"variableGroups":[],"environments":[{"id":5,"name":"Environment 1","rank":1,"owner":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"variables":{},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13}]},"deployStep":{"tasks":[],"id":14},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":15}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":1,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"845fd4f4-642d-4694-8514-047948a5a556","version":"0.*","name":"Packer build","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"templateType":"custom","customTemplateLocation":"$(System.DefaultWorkingDirectory)/BD1/drop/custom.windows.template.json","ConnectedServiceName":"f8b58ade-2306-437d-a3f1-2ddab6d8d47a","location":"eastus","storageAccountName":"3dkxbowatma4qwinrmsa","azureResourceGroup":"test-azurergtask","baseImage":"MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:windows","packagePath":"**//*.zip","deployScriptPath":"xsx","deployScriptArguments":"","imageUri":"imageUri","imageStorageAccount":"storageAccntLoc"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"\nWrite-Host $(imageUri)\nWrite-Host $(storageAccntLoc)","workingFolder":"","failOnStandardError":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"deploymentAuthorizationOwner":0},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"79c750d8-3a4d-4de8-b758-0196fe6f0283:1","type":"Build","alias":"BD1","definitionReference":{"artifactSourceDefinitionUrl":{"id":"http://biprasad-dev3:8080/tfs/_permalink/_build/index?collectionId=0a71b06c-7cb1-4b63-9438-25d16d22e96a&projectId=79c750d8-3a4d-4de8-b758-0196fe6f0283&definitionId=1","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"1","name":"BD1"},"project":{"id":"79c750d8-3a4d-4de8-b758-0196fe6f0283","name":"test1"}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","retentionPolicy":null,"url":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apis/Release/definitions/5","_links":{"self":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apis/Release/definitions/5"},"web":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apps/hub/ms.vss-releaseManagement-web.hub-explorer?definitionId=5"}},"tags":[],"properties":{}}