{"source":2,"id":7,"revision":10,"name":"packer - nodejs app","createdBy":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"createdOn":"2017-03-21T10:05:10.917Z","modifiedBy":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"modifiedOn":"2017-03-22T11:59:54.947Z","lastRelease":null,"path":"\\","variables":{"imageUri":{"value":""},"imageStorageAccntLoc":{"value":""}},"variableGroups":[],"environments":[{"id":7,"name":"Environment 1","rank":1,"owner":{"id":"eeaf30ea-0845-40e4-bddd-acd8b54eb38e","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/eeaf30ea-0845-40e4-bddd-acd8b54eb38e","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=eeaf30ea-0845-40e4-bddd-acd8b54eb38e"},"variables":{},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":19}]},"deployStep":{"tasks":[],"id":20},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":21}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":1,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"845fd4f4-642d-4694-8514-047948a5a556","version":"0.*","name":"Packer build","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"templateType":"builtin","customTemplateLocation":"$(System.DefaultWorkingDirectory)/test1/nodejs-app-azure-server-2012.json","ConnectedServiceName":"f8b58ade-2306-437d-a3f1-2ddab6d8d47a","location":"southindia","storageAccountName":"bishalpackerimages","azureResourceGroup":"bishal-packer-rg1","baseImageSource":"default","baseImage":"MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:windows","customImageUrl":"","customImageOSType":"windows","packagePath":"$(System.DefaultWorkingDirectory)/**/NodejsWebApp1","deployScriptPath":"$(System.DefaultWorkingDirectory)/**/deploy.ps1","deployScriptArguments":"","imageUri":"imageUri"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"\nWrite-Host $(imageStorageAccntLoc)\nWrite-Host $(imageUri)","workingFolder":"","failOnStandardError":"true"}},{"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Azure Deployment:Create Or Update Resource Group action on bishal-packer-app","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceName":"f8b58ade-2306-437d-a3f1-2ddab6d8d47a","action":"Create Or Update Resource Group","resourceGroupName":"bishal-packer-app","location":"$(imageStorageAccntLoc)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/test1/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/test1/azuredeploy.parameters.json","overrideParameters":"-imageUri $(imageUri)","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","machineGroupName":"","copyAzureVMTags":"true","vstsPATToken":"","outputVariable":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"deploymentAuthorizationOwner":0},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"79c750d8-3a4d-4de8-b758-0196fe6f0283:76a54689-c72a-48cf-9c6d-fa59aa4d8dd4","type":"Git","alias":"test1","definitionReference":{"branches":{"id":"master","name":"master"},"checkoutSubmodules":{"id":"","name":""},"definition":{"id":"76a54689-c72a-48cf-9c6d-fa59aa4d8dd4","name":"test1"},"fetchDepth":{"id":"","name":""},"gitLfsSupport":{"id":"","name":""},"project":{"id":"79c750d8-3a4d-4de8-b758-0196fe6f0283","name":"test1"}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","retentionPolicy":null,"url":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apis/Release/definitions/7","_links":{"self":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apis/Release/definitions/7"},"web":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/79c750d8-3a4d-4de8-b758-0196fe6f0283/_apps/hub/ms.vss-releaseManagement-web.hub-explorer?definitionId=7"}},"tags":[],"properties":{}}