{"source":2,"id":4,"revision":2,"name":"packer-custom-image","createdBy":{"id":"63c0685d-6b04-49a9-a660-051445afc41a","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/63c0685d-6b04-49a9-a660-051445afc41a","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=63c0685d-6b04-49a9-a660-051445afc41a"},"createdOn":"2017-03-23T06:21:44.527Z","modifiedBy":{"id":"63c0685d-6b04-49a9-a660-051445afc41a","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/63c0685d-6b04-49a9-a660-051445afc41a","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=63c0685d-6b04-49a9-a660-051445afc41a"},"modifiedOn":"2017-03-23T06:21:55.940Z","lastRelease":null,"path":"\\","variables":{"imageUri":{"value":""},"storageAccntLoc":{"value":""},"image_url":{"value":"https://bishalpackerimages.blob.core.windows.net/system/Microsoft.Compute/Images/vsts-buildimagetask/Release-1-osDisk.2d175222-b257-405f-a07f-0af4dc4b3dc4.vhd"}},"variableGroups":[],"environments":[{"id":4,"name":"Environment 1","rank":1,"owner":{"id":"63c0685d-6b04-49a9-a660-051445afc41a","displayName":"Bishal Prasad","uniqueName":"FAREAST\\biprasad","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/_apis/Identities/63c0685d-6b04-49a9-a660-051445afc41a","imageUrl":"http://biprasad-dev3:8080/tfs/DefaultCollection/_api/_common/identityImage?id=63c0685d-6b04-49a9-a660-051445afc41a"},"variables":{},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":10}]},"deployStep":{"tasks":[],"id":11},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":12}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":1,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"845fd4f4-642d-4694-8514-047948a5a556","version":"0.*","name":"Packer build","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"templateType":"builtin","customTemplateLocation":"E:\\work\\packer\\custom-base.windows.template.json","ConnectedServiceName":"421accf2-e992-4e3d-97c7-7356720a8c8a","location":"southindia","storageAccountName":"bishalpackerimages","azureResourceGroup":"bishal-packer-rg1","baseImageSource":"customVhd","baseImage":"MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:windows","customImageUrl":"$(image_url)","customImageOSType":"windows","packagePath":"**//*.zip","deployScriptPath":"$(System.DefaultWorkingDirectory)/**/deploy.ps1","deployScriptArguments":"","imageUri":"imageUri"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"\nWrite-Host $(imageUri)\nWrite-Host $(storageAccntLoc)","workingFolder":"","failOnStandardError":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"d5d4ad63-7302-4381-b8f6-5d5ed2d25ae2:bishal-pdMSFT/packer-sample:master","type":"GitHub","alias":"bishal-pdMSFT_packer-sample","definitionReference":{"branch":{"id":"master","name":"master"},"checkoutSubmodules":{"id":"","name":""},"connection":{"id":"d5d4ad63-7302-4381-b8f6-5d5ed2d25ae2","name":"bishal-pdmsft-github"},"definition":{"id":"bishal-pdMSFT/packer-sample","name":"bishal-pdMSFT/packer-sample"},"fetchDepth":{"id":"","name":""},"gitLfsSupport":{"id":"","name":""}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","url":"http://biprasad-dev3:8080/tfs/DefaultCollection/b3b142bd-68f5-4183-8c1a-23356cf62fe1/_apis/Release/definitions/4","_links":{"self":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/b3b142bd-68f5-4183-8c1a-23356cf62fe1/_apis/Release/definitions/4"},"web":{"href":"http://biprasad-dev3:8080/tfs/DefaultCollection/b3b142bd-68f5-4183-8c1a-23356cf62fe1/_apps/hub/ms.vss-releaseManagement-web.hub-explorer?definitionId=4"}},"tags":[],"properties":{}}